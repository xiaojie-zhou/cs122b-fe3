{"ast":null,"code":"var _jsxFileName = \"/Users/XiaojieZhou/CS122B/cs122b-fe3/src/pages/ShoppingCart.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useUser } from \"hook/User\";\nimport styled from \"styled-components\";\nimport { useForm } from \"react-hook-form\";\nimport \"./Home.css\";\nimport { NavLink, useNavigate, useParams } from \"react-router-dom\";\nimport { cartInsert, cartRetrieve, cartDelete, cartUpdate, cartClear } from \"../backend/billing\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Table from \"react-bootstrap/Table\";\nimport { Button } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StyledDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color : #fff;\n`;\n_c = StyledDiv;\n\nconst ShoppingCart = () => {\n  _s();\n\n  const {\n    accessToken,\n    setAccessToken,\n    refreshToken,\n    setRefreshToken\n  } = useUser();\n  const [post, setPost] = React.useState();\n  const navigate = useNavigate();\n  const {\n    register,\n    getValues,\n    handleSubmit\n  } = useForm();\n  React.useEffect(() => {\n    cartRetrieve(accessToken).then(response => setPost(response.data)).catch(error => {\n      console.log(JSON.stringify(error.response, null, 2));\n    });\n  }, []);\n  const [cart, setCart] = React.useState();\n\n  const updateCart = movieId => {\n    const quantity = getValues(\"q\" + movieId);\n    const payload = {\n      movieId: movieId,\n      quantity: quantity\n    };\n    cartUpdate(payload, accessToken).catch(error => console.log(JSON.stringify(error.response, null, 2)));\n    window.location.reload(false);\n  };\n\n  const deleteFromCart = movieId => {\n    const payload = {\n      movieId: movieId\n    };\n    cartDelete(payload, accessToken).catch(error => console.log(JSON.stringify(error.response, null, 2)));\n    window.location.reload(false);\n  };\n\n  const clearCart = () => {\n    cartClear(accessToken).catch(error => console.log(JSON.stringify(error.response, null, 2)));\n    window.location.reload(false);\n  };\n\n  if (post === undefined || post.total === undefined) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Cart is Empty\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 22\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(StyledDiv, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Shopping Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        responsive: true,\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            width: \"20%\",\n            children: \" Movie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            width: \"20%\",\n            children: \" Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            width: \"20%\",\n            children: \" Quantity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            width: \"20%\",\n            children: \" Modify\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            width: \"20%\",\n            children: \" Unit Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            width: \"20%\",\n            children: \" Subtotal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), post && post.items && post.items.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"https://image.tmdb.org/t/p/original\" + item.posterPath,\n              alt: \"movie poster\",\n              width: \"100\",\n              height: \"150\",\n              onClick: () => navigate(\"/movie/\" + item.movieId)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.movieTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            align: \"center\",\n            children: item.quantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              style: {\n                width: \"100%\"\n              },\n              ...register(\"q\" + item.movieId),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"1\",\n                children: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"2\",\n                children: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"3\",\n                children: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"4\",\n                children: \"4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"5\",\n                children: \"5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"6\",\n                children: \"6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"7\",\n                children: \"7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"8\",\n                children: \"8\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"9\",\n                children: \"9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"10\",\n                children: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                background: \"#2D9AB7\",\n                width: \"100%\"\n              },\n              onClick: handleSubmit(() => updateCart(item.movieId)),\n              children: \"Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                background: \"#2D9AB7\",\n                width: \"100%\"\n              },\n              onClick: handleSubmit(() => deleteFromCart(item.movieId)),\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            align: \"right\",\n            children: [\"$\", item.unitPrice]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            align: \"right\",\n            children: [\"$\", (item.quantity * item.unitPrice).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        align: \"right\",\n        children: [\"Total: $\", post && post.total && post.total.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => navigate(\"/checkout\"),\n        children: \"Check Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: clearCart,\n        children: \"Remove All\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this);\n  }\n};\n\n_s(ShoppingCart, \"ecU3Dra3am6RftAwWLJp00kiP0c=\", false, function () {\n  return [useUser, useNavigate, useForm];\n});\n\n_c2 = ShoppingCart;\nexport default ShoppingCart;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"StyledDiv\");\n$RefreshReg$(_c2, \"ShoppingCart\");","map":{"version":3,"sources":["/Users/XiaojieZhou/CS122B/cs122b-fe3/src/pages/ShoppingCart.jsx"],"names":["React","useState","useUser","styled","useForm","NavLink","useNavigate","useParams","cartInsert","cartRetrieve","cartDelete","cartUpdate","cartClear","Table","Button","StyledDiv","div","ShoppingCart","accessToken","setAccessToken","refreshToken","setRefreshToken","post","setPost","navigate","register","getValues","handleSubmit","useEffect","then","response","data","catch","error","console","log","JSON","stringify","cart","setCart","updateCart","movieId","quantity","payload","window","location","reload","deleteFromCart","clearCart","undefined","total","items","map","item","posterPath","movieTitle","width","background","unitPrice","toFixed"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport {useUser} from \"hook/User\";\nimport styled from \"styled-components\";\nimport {useForm} from \"react-hook-form\";\nimport \"./Home.css\"\nimport {NavLink, useNavigate, useParams} from \"react-router-dom\";\nimport {cartInsert, cartRetrieve, cartDelete, cartUpdate, cartClear} from \"../backend/billing\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Table from \"react-bootstrap/Table\";\nimport {Button} from \"react-bootstrap\";\n\n\n\nconst StyledDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color : #fff;\n`\n\nconst ShoppingCart = () => {\n    const {\n        accessToken, setAccessToken,\n        refreshToken, setRefreshToken\n    } = useUser();\n\n    const [post,setPost] = React.useState();\n    const navigate = useNavigate();\n\n    const {register, getValues, handleSubmit} = useForm();\n\n    React.useEffect(() => {\n        cartRetrieve(accessToken)\n            .then(response => setPost(response.data))\n            .catch(error => {\n                console.log(JSON.stringify(error.response,null,2))});},[])\n\n    const [cart,setCart] = React.useState();\n    const updateCart =(movieId)=> {\n        const quantity = getValues(\"q\" + movieId);\n        const payload ={\n            movieId: movieId,\n            quantity: quantity,\n        }\n        cartUpdate(payload, accessToken)\n            .catch(error => console.log(JSON.stringify(error.response,null,2)))\n        window.location.reload(false);\n\n    }\n\n    const deleteFromCart =(movieId)=> {\n        const payload ={\n            movieId: movieId\n        }\n        cartDelete(payload, accessToken)\n            .catch(error => console.log(JSON.stringify(error.response,null,2)))\n        window.location.reload(false);\n\n    }\n\n    const clearCart = () =>{\n        cartClear(accessToken)\n            .catch(error => console.log(JSON.stringify(error.response,null,2)))\n        window.location.reload(false);\n\n    }\n\n    if (post === undefined || post.total === undefined){\n        return (<div><h2>Cart is Empty</h2></div>);\n    }\n    else {\n        return (\n            <StyledDiv>\n                <h2>Shopping Cart</h2>\n                <Table responsive>\n                    <tr>\n                        <th align={\"left\"} width=\"20%\"> Movie</th>\n                        <th align={\"left\"} width=\"20%\"> Title</th>\n                        <th align={\"left\"} width=\"20%\"> Quantity</th>\n                        <th align={\"left\"} width=\"20%\"> Modify</th>\n                        <th align={\"left\"} width=\"20%\"> Unit Price</th>\n                        <th align={\"left\"} width=\"20%\"> Subtotal</th>\n                    </tr>\n\n                    {(post && post.items && post.items.map(item =>\n                        <tr>\n                            <td><img src={\"https://image.tmdb.org/t/p/original\" + item.posterPath} alt=\"movie poster\"\n                                     width=\"100\" height=\"150\" onClick={() => navigate(\"/movie/\" + item.movieId)}/></td>\n                            <td>{item.movieTitle}</td>\n                            <td align={\"center\"}>\n                                {item.quantity}</td>\n                            <td>\n                                <select style={{width: \"100%\"}} {...register(\"q\" + item.movieId)}>\n                                    <option value=\"1\">1</option>\n                                    <option value=\"2\">2</option>\n                                    <option value=\"3\">3</option>\n                                    <option value=\"4\">4</option>\n                                    <option value=\"5\">5</option>\n                                    <option value=\"6\">6</option>\n                                    <option value=\"7\">7</option>\n                                    <option value=\"8\">8</option>\n                                    <option value=\"9\">9</option>\n                                    <option value=\"10\">10</option>\n                                </select>\n                                <Button style={{background:\"#2D9AB7\",width: \"100%\"}}\n                                        onClick={handleSubmit(() => updateCart(item.movieId))}>Update\n                                </Button>\n                                <Button style={{background:\"#2D9AB7\",width: \"100%\"}}\n                                        onClick={handleSubmit(() => deleteFromCart(item.movieId))}>Delete\n                                </Button>\n                            </td>\n                            <td align=\"right\">${item.unitPrice}</td>\n                            <td align=\"right\">${(item.quantity * item.unitPrice).toFixed(2)}</td>\n\n                        </tr>\n                    ))}\n                </Table>\n                <h3 align={\"right\"}>Total: ${post && post.total && post.total.toFixed(2)}</h3>\n                <Button onClick={() => navigate(\"/checkout\")}>Check Out</Button>\n                <Button onClick={clearCart}>Remove All</Button>\n            </StyledDiv>\n        );\n    }\n\n}\n\nexport default ShoppingCart;\n"]},"metadata":{},"sourceType":"module"}