{"ast":null,"code":"var _jsxFileName = \"/Users/XiaojieZhou/CS122B/cs122b-fe3/src/pages/Search.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { search } from \"backend/movies\";\nimport styled from \"styled-components\";\nimport { useUser } from \"../hook/User\";\nimport Table from \"react-bootstrap/Table\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useNavigate } from \"react-router-dom\";\nimport { Button } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StyledButton = styled.button`\n  background-color: ${props => \"#2D9AB7\"}; \n  color: white;\n  width: 50%;\n  margin-left:25%;\n  margin-right:25%;\n  padding: 5px 15px;\n  border-radius: 5px;\n  text-transform: uppercase;\n  cursor: pointer;\n  box-shadow: 0px 2px 2px lightgray;\n  transition: ease background-color 250ms;\n  &:hover {\n    background-color: ${props => \"#3077a7\"};\n  }`;\n_c = StyledButton;\nconst StyledDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color : #fff;\n\n`;\n_c2 = StyledDiv;\n\nconst Search = () => {\n  _s();\n\n  const {\n    accessToken,\n    setAccessToken,\n    refreshToken,\n    setRefreshToken\n  } = useUser();\n  const {\n    register,\n    getValues,\n    handleSubmit\n  } = useForm();\n  const [movies, setMovies] = useState([]);\n  let [page, setPage] = useState(1);\n  const navigate = useNavigate();\n\n  const nextPage = () => {\n    setPage(page + 1);\n    page += 1;\n    submitSearch();\n  };\n\n  const prevPage = () => {\n    if (page > 1) {\n      setPage(page - 1);\n      page -= 1;\n      submitSearch();\n    }\n  };\n\n  const submitSearch = () => {\n    const title = getValues(\"Title\");\n    const year = getValues(\"Year\");\n    const director = getValues(\"Director\");\n    const genre = getValues(\"Genre\");\n    const limit = getValues(\"limit\");\n    const orderBy = getValues(\"orderBy\");\n    const direction = getValues(\"direction\");\n    const query = {\n      title: title,\n      year: year,\n      director: director,\n      genre: genre,\n      limit: limit,\n      page: page,\n      orderBy: orderBy,\n      direction: direction\n    };\n    search(query, accessToken).then(response => {\n      // alert(JSON.stringify(response.data, null,2))\n      setMovies(response.data.movies);\n    }).catch(error => alert(JSON.stringify(error.response.data, null, 2))); //correctly prints error\n  };\n\n  return /*#__PURE__*/_jsxDEV(StyledDiv, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"search input\",\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            children: \"Movie Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            children: \"Year\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            children: \"Director\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            children: \"Genre\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", { ...register(\"Title\"),\n              type: \"title\",\n              placeholder: \"Title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", { ...register(\"Year\"),\n              type: \"year\",\n              placeholder: \"Year\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", { ...register(\"Director\"),\n              type: \"director\",\n              placeholder: \"Director\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", { ...register(\"Genre\"),\n              type: \"genre\",\n              placeholder: \"Genre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            children: \"Results per page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            children: \"Sort by\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            children: \"Direction\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"select\", { ...register(\"limit\"),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: 10,\n                children: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 25,\n                children: \"25\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 50,\n                children: \"50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 100,\n                children: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"select\", { ...register(\"orderBy\"),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"title\",\n                children: \"Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"rating\",\n                children: \"Rating\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"year\",\n                children: \"Year\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"select\", { ...register(\"direction\"),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"asc\",\n                children: \"Ascending\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"desc\",\n                children: \"Descending\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(StyledButton, {\n          type: \"search\",\n          onClick: handleSubmit(submitSearch),\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"result\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Result\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        responsive: true,\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            children: \"Movie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            children: \"Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            children: \"Year\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            children: \"Director\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            align: \"left\",\n            children: \"Rating\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: movies.map(movies => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"https://image.tmdb.org/t/p/original\" + movies.posterPath,\n                alt: \"movie poster\",\n                width: \"100\",\n                height: \"150\",\n                onClick: () => navigate(\"/movie/\" + movies.id)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: movies.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: movies.year\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: movies.director\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: movies.rating\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                background: \"#2D9AB7\"\n              },\n              onClick: () => navigate(\"/movie/\" + movies.id),\n              children: \"View More\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StyledButton, {\n      onClick: prevPage,\n      children: \" Previous \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      align: \"center\",\n      children: [\" \", page, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StyledButton, {\n      onClick: nextPage,\n      children: \" Next \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Search, \"Flt4IpQKXBrCeqGTC0dRJ9lPBik=\", false, function () {\n  return [useUser, useForm, useNavigate];\n});\n\n_c3 = Search;\nexport default Search;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"StyledButton\");\n$RefreshReg$(_c2, \"StyledDiv\");\n$RefreshReg$(_c3, \"Search\");","map":{"version":3,"sources":["/Users/XiaojieZhou/CS122B/cs122b-fe3/src/pages/Search.jsx"],"names":["React","useState","useForm","search","styled","useUser","Table","useNavigate","Button","StyledButton","button","props","StyledDiv","div","Search","accessToken","setAccessToken","refreshToken","setRefreshToken","register","getValues","handleSubmit","movies","setMovies","page","setPage","navigate","nextPage","submitSearch","prevPage","title","year","director","genre","limit","orderBy","direction","query","then","response","data","catch","error","alert","JSON","stringify","map","posterPath","id","rating","background"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport {useForm} from \"react-hook-form\";\nimport {search} from \"backend/movies\";\nimport styled from \"styled-components\";\nimport {useUser} from \"../hook/User\";\nimport Table from \"react-bootstrap/Table\"\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {useNavigate} from \"react-router-dom\";\nimport {Button} from \"react-bootstrap\";\n\n\nconst StyledButton = styled.button`\n  background-color: ${(props) => \"#2D9AB7\"}; \n  color: white;\n  width: 50%;\n  margin-left:25%;\n  margin-right:25%;\n  padding: 5px 15px;\n  border-radius: 5px;\n  text-transform: uppercase;\n  cursor: pointer;\n  box-shadow: 0px 2px 2px lightgray;\n  transition: ease background-color 250ms;\n  &:hover {\n    background-color: ${(props) => \"#3077a7\"};\n  }`;\n\nconst StyledDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color : #fff;\n\n`\n\n\n\nconst Search = () => {\n    const {\n        accessToken, setAccessToken,\n        refreshToken, setRefreshToken\n    } = useUser();\n    const {register, getValues, handleSubmit} = useForm();\n    const [movies, setMovies] = useState([]);\n    let [page, setPage] = useState(1);\n    const navigate = useNavigate();\n\n    const nextPage =()=>{\n        setPage(page+1);\n        page+=1\n        submitSearch();\n    }\n    const prevPage=()=>{\n        if (page > 1){\n            setPage(page-1);\n            page-=1\n            submitSearch();\n        }\n    }\n\n    const submitSearch = () => {\n        const title = getValues(\"Title\");\n        const year = getValues(\"Year\");\n        const director = getValues(\"Director\");\n        const genre = getValues(\"Genre\");\n\n        const limit = getValues(\"limit\");\n\n        const orderBy = getValues(\"orderBy\");\n        const direction = getValues(\"direction\");\n\n        const query = {\n            title: title,\n            year: year,\n            director: director,\n            genre: genre,\n\n            limit: limit,\n            page: page,\n            orderBy: orderBy,\n            direction: direction\n        }\n\n        search(query, accessToken)\n            .then(response => {\n                // alert(JSON.stringify(response.data, null,2))\n                setMovies(response.data.movies)})\n            .catch(error => alert(JSON.stringify(error.response.data, null, 2))) //correctly prints error\n    }\n\n\n    return (\n        <StyledDiv>\n            <div className=\"search\">\n                <form className=\"search input\">\n                    <tr>\n                        <th align={\"left\"}>Movie Title</th>\n                        <th align={\"left\"}>Year</th>\n                        <th align={\"left\"}>Director</th>\n                        <th align={\"left\"}>Genre</th>\n                    </tr>\n                    <tr>\n                        <td><input {...register(\"Title\")} type={\"title\"} placeholder=\"Title\" ></input></td>\n\n                        <td><input {...register(\"Year\")} type={\"year\"} placeholder=\"Year\" ></input></td>\n\n                        <td><input {...register(\"Director\")} type={\"director\"} placeholder=\"Director\" ></input></td>\n\n                        <td><input {...register(\"Genre\")} type=\"genre\" placeholder=\"Genre\" ></input></td>\n                    </tr>\n\n                    <tr>\n                        <th align={\"left\"}>Results per page</th>\n                        <th align={\"left\"}>Sort by</th>\n                        <th align={\"left\"}>Direction</th>\n                    </tr>\n                    <tr>\n                        <td><select {...register(\"limit\")}>\n                            <option value = {10}>10</option>\n                            <option value = {25}>25</option>\n                            <option value = {50}>50</option>\n                            <option value = {100}>100</option>\n                        </select></td>\n\n                        <td><select {...register(\"orderBy\")}>\n                            <option value={\"title\"}>Title</option>\n                            <option value={\"rating\"}>Rating</option>\n                            <option value={\"year\"}>Year</option>\n                        </select></td>\n\n                        <td><select {...register(\"direction\")}>\n                            <option value={\"asc\"}>Ascending</option>\n                            <option value={\"desc\"}>Descending</option>\n                        </select></td>\n\n\n\n                    </tr>\n                    <StyledButton type={\"search\"} onClick={handleSubmit(submitSearch)}>Search</StyledButton>\n                </form>\n            </div>\n\n\n            <div className=\"result\">\n                <h3>Result</h3>\n                <Table responsive>\n                    <tr>\n                        <th align={\"left\"}>Movie</th>\n                        <th align={\"left\"}>Title</th>\n                        <th align={\"left\"}>Year</th>\n                        <th align={\"left\"}>Director</th>\n                        <th align={\"left\"}>Rating</th>\n                    </tr>\n                    <tbody>\n                    {movies.map(movies =>\n                        <tr>\n                            <td><img src={\"https://image.tmdb.org/t/p/original\" + movies.posterPath} alt=\"movie poster\"\n                                     width=\"100\" height=\"150\" onClick={() => navigate(\"/movie/\" + movies.id)}/></td>\n                            <td>{movies.title}</td>\n                            <td>{movies.year}</td>\n                            <td>{movies.director}</td>\n                            <td>{movies.rating}</td>\n                            <Button style={{background:\"#2D9AB7\"}} onClick={()=>navigate(\"/movie/\"+movies.id)}>View More</Button>\n                        </tr>\n                    )}\n                    </tbody>\n                </Table>\n            </div>\n\n            <StyledButton onClick={prevPage}> Previous </StyledButton>\n            <h4 align={\"center\"}> {page} </h4>\n            <StyledButton onClick={nextPage}> Next </StyledButton>\n        </StyledDiv>\n    );\n}\n\n\nexport default Search;\n\n"]},"metadata":{},"sourceType":"module"}